<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tank Components API</title>
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --light-color: #ecf0f1;
      --dark-color: #34495e;
      --success-color: #2ecc71;
      --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--dark-color);
      background-color: #f4f7f9;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      background-color: var(--primary-color);
      color: white;
      padding: 1rem;
      text-align: center;
    }
    
    h1, h2, h3 {
      margin-bottom: 1rem;
    }
    
    nav {
      display: flex;
      justify-content: center;
      background-color: var(--dark-color);
      padding: 10px;
    }
    
    nav button {
      background-color: transparent;
      border: none;
      color: white;
      padding: 8px 16px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
      border-radius: 4px;
    }
    
    nav button:hover, nav button.active {
      background-color: var(--secondary-color);
    }
    
    #stats {
      background-color: var(--light-color);
      border-radius: 8px;
      margin-bottom: 20px;
      padding: 15px;
      box-shadow: var(--card-shadow);
    }
    
    .components-section {
      display: none;
    }
    
    .components-section.active {
      display: block;
    }
    
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
      align-items: center;
    }
    
    .search-box {
      flex: 1;
      min-width: 250px;
    }
    
    .search-box input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    
    .filter-box {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    
    select {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .component-card {
      background-color: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: var(--card-shadow);
      transition: transform 0.3s;
    }
    
    .component-card:hover {
      transform: translateY(-5px);
    }
    
    .component-header {
      background-color: var(--secondary-color);
      color: white;
      padding: 15px;
      position: relative;
    }
    
    .component-header h3 {
      margin: 0;
      padding-right: 30px;
    }
    
    .component-content {
      padding: 15px;
    }
    
    .component-meta {
      margin-bottom: 10px;
      color: #666;
      font-size: 14px;
    }
    
    .component-meta strong {
      color: var(--dark-color);
    }
    
    .component-meta-item {
      margin-bottom: 5px;
    }
    
    .component-desc {
      margin-bottom: 15px;
      font-style: italic;
    }
    
    .component-details {
      background-color: var(--light-color);
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
    }
    
    .button {
      display: inline-block;
      background-color: var(--secondary-color);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      font-size: 14px;
      transition: background-color 0.3s;
    }
    
    .button:hover {
      background-color: var(--primary-color);
    }
    
    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-right: 5px;
      margin-bottom: 5px;
    }
    
    .badge-rarity-common {
      background-color: #95a5a6;
      color: white;
    }
    
    .badge-rarity-uncommon {
      background-color: #27ae60;
      color: white;
    }
    
    .badge-rarity-rare {
      background-color: #2980b9;
      color: white;
    }
    
    .badge-rarity-epic {
      background-color: #8e44ad;
      color: white;
    }
    
    .badge-rarity-legendary {
      background-color: #f39c12;
      color: white;
    }
    
    .badge-rarity-mythical {
      background-color: #c0392b;
      color: white;
    }
    
    .badge-nation {
      background-color: var(--dark-color);
      color: white;
    }
    
    .badge-era {
      background-color: var(--primary-color);
      color: white;
    }
    
    .loading-indicator {
      text-align: center;
      padding: 20px;
      font-size: 18px;
      color: var(--secondary-color);
    }
    
    .error-message {
      background-color: var(--accent-color);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .detail-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      overflow-y: auto;
    }
    
    .detail-modal.active {
      display: block;
    }
    
    .modal-content {
      background-color: white;
      margin: 50px auto;
      max-width: 800px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .modal-header {
      background-color: var(--secondary-color);
      color: white;
      padding: 15px;
      position: relative;
    }
    
    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 24px;
      color: white;
      cursor: pointer;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 15px;
    }
    
    .tab-button {
      padding: 10px 15px;
      background: none;
      border: none;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      margin-right: 10px;
    }
    
    .tab-button.active {
      border-bottom-color: var(--secondary-color);
      color: var(--secondary-color);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .attribute-list {
      list-style: none;
    }
    
    .attribute-list li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
    }
    
    .attribute-list li:last-child {
      border-bottom: none;
    }
    
    .attribute-name {
      font-weight: bold;
    }
    
    .attribute-value {
      color: var(--dark-color);
    }
    
    @media (max-width: 768px) {
      .component-grid {
        grid-template-columns: 1fr;
      }
      
      .controls {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-box, .filter-box {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Tank Components API</h1>
    <p>Browse all available tank components</p>
  </header>
  
  <nav>
    <button id="nav-guns" class="nav-button active">Guns</button>
    <button id="nav-turrets" class="nav-button">Turrets</button>
    <button id="nav-hulls" class="nav-button">Hulls</button>
  </nav>
  
  <div class="container">
    <div id="stats">
      <h2>Component Statistics</h2>
      <p>Total Components: <span id="total-count">0</span></p>
      <p>Guns: <span id="guns-count">0</span></p>
      <p>Turrets: <span id="turrets-count">0</span></p>
      <p>Hulls: <span id="hulls-count">0</span></p>
      <p>Last Updated: <span id="last-updated">Unknown</span></p>
    </div>
    
    <div id="error-container"></div>
    
    <!-- Guns Section -->
    <section id="guns-section" class="components-section active">
      <h2>Guns</h2>
      
      <div class="controls">
        <div class="search-box">
          <input type="text" id="guns-search" placeholder="Search guns by name...">
        </div>
        
        <div class="filter-box">
          <label for="guns-nation">Nation:</label>
          <select id="guns-nation">
            <option value="">All Nations</option>
          </select>
          
          <label for="guns-era">Era:</label>
          <select id="guns-era">
            <option value="">All Eras</option>
          </select>
          
          <label for="guns-rarity">Rarity:</label>
          <select id="guns-rarity">
            <option value="">All Rarities</option>
          </select>
        </div>
      </div>
      
      <div id="guns-grid" class="component-grid">
        <div class="loading-indicator">Loading guns...</div>
      </div>
    </section>
    
    <!-- Turrets Section -->
    <section id="turrets-section" class="components-section">
      <h2>Turrets</h2>
      
      <div class="controls">
        <div class="search-box">
          <input type="text" id="turrets-search" placeholder="Search turrets by name...">
        </div>
        
        <div class="filter-box">
          <label for="turrets-nation">Nation:</label>
          <select id="turrets-nation">
            <option value="">All Nations</option>
          </select>
          
          <label for="turrets-era">Era:</label>
          <select id="turrets-era">
            <option value="">All Eras</option>
          </select>
          
          <label for="turrets-rarity">Rarity:</label>
          <select id="turrets-rarity">
            <option value="">All Rarities</option>
          </select>
        </div>
      </div>
      
      <div id="turrets-grid" class="component-grid">
        <div class="loading-indicator">Loading turrets...</div>
      </div>
    </section>
    
    <!-- Hulls Section -->
    <section id="hulls-section" class="components-section">
      <h2>Hulls</h2>
      
      <div class="controls">
        <div class="search-box">
          <input type="text" id="hulls-search" placeholder="Search hulls by name...">
        </div>
        
        <div class="filter-box">
          <label for="hulls-nation">Nation:</label>
          <select id="hulls-nation">
            <option value="">All Nations</option>
          </select>
          
          <label for="hulls-era">Era:</label>
          <select id="hulls-era">
            <option value="">All Eras</option>
          </select>
          
          <label for="hulls-rarity">Rarity:</label>
          <select id="hulls-rarity">
            <option value="">All Rarities</option>
          </select>
        </div>
      </div>
      
      <div id="hulls-grid" class="component-grid">
        <div class="loading-indicator">Loading hulls...</div>
      </div>
    </section>
  </div>
  
  <!-- Component Detail Modal -->
  <div id="detail-modal" class="detail-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">Component Details</h2>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="tabs">
          <button class="tab-button active" data-tab="basic">Basic Info</button>
          <button class="tab-button" data-tab="attributes">Attributes</button>
          <button class="tab-button" data-tab="config">Configuration</button>
          <button class="tab-button" id="shells-tab" data-tab="shells">Shells</button>
        </div>
        
        <div id="basic-tab" class="tab-content active">
          <div id="modal-basic-info"></div>
        </div>
        
        <div id="attributes-tab" class="tab-content">
          <ul id="modal-attributes" class="attribute-list"></ul>
        </div>
        
        <div id="config-tab" class="tab-content">
          <ul id="modal-config" class="attribute-list"></ul>
        </div>
        
        <div id="shells-tab" class="tab-content">
          <div id="modal-shells"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Global variables
    let componentsData = {
      turrets: {},
      hulls: {},
      guns: {}
    };
    let currentComponentType = 'guns';
    
    // DOM Elements
    const navButtons = document.querySelectorAll('.nav-button');
    const sections = document.querySelectorAll('.components-section');
    const errorContainer = document.getElementById('error-container');
    const detailModal = document.getElementById('detail-modal');
    const modalClose = document.querySelector('.modal-close');
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    const shellsTab = document.getElementById('shells-tab');
    
    // Initialize the app
    document.addEventListener('DOMContentLoaded', () => {
      fetchComponentsData();
      setupEventListeners();
    });
    
    // Fetch components data from appropriate JSON files
    async function fetchComponentsData() {
      try {
        // Fetch combined components.json
        const componentsResponse = await fetch('data/components.json');
        if (componentsResponse.ok) {
          const combinedData = await componentsResponse.json();
          componentsData.turrets = combinedData.turrets || {};
          componentsData.hulls = combinedData.hulls || {};
          
          // Update turrets/hulls count
          document.getElementById('turrets-count').textContent = combinedData.count?.turrets || Object.keys(componentsData.turrets).length;
          document.getElementById('hulls-count').textContent = combinedData.count?.hulls || Object.keys(componentsData.hulls).length;
          
          // Populate filters for turrets and hulls
          populateFilters('turrets');
          populateFilters('hulls');
          
          // Render turrets and hulls
          renderComponents('turrets');
          renderComponents('hulls');
        } else {
          console.warn('Could not load combined components data');
        }
        
        // Fetch guns.json (original data)
        const gunsResponse = await fetch('data/guns.json');
        if (gunsResponse.ok) {
          const gunsData = await gunsResponse.json();
          componentsData.guns = gunsData.items || {};
          
          // Update guns count
          document.getElementById('guns-count').textContent = gunsData.count || Object.keys(componentsData.guns).length;
          
          // Populate filters for guns
          populateFilters('guns');
          
          // Render guns
          renderComponents('guns');
        } else {
          console.warn('Could not load guns data');
        }
        
        // Update total count and last updated
        const totalCount = 
          Object.keys(componentsData.guns).length + 
          Object.keys(componentsData.turrets).length + 
          Object.keys(componentsData.hulls).length;
        
        document.getElementById('total-count').textContent = totalCount;
        
        // Use the most recent last updated date
        const lastUpdated = new Date().toISOString();
        document.getElementById('last-updated').textContent = new Date(lastUpdated).toLocaleString();
        
      } catch (error) {
        showError(`Error loading component data: ${error.message}`);
      }
    }
    
    // Set up event listeners
    function setupEventListeners() {
      // Navigation
      navButtons.forEach(button => {
        button.addEventListener('click', () => {
          const targetType = button.id.replace('nav-', '');
          switchSection(targetType);
        });
      });
      
      // Search inputs
      document.getElementById('guns-search').addEventListener('input', () => filterComponents('guns'));
      document.getElementById('turrets-search').addEventListener('input', () => filterComponents('turrets'));
      document.getElementById('hulls-search').addEventListener('input', () => filterComponents('hulls'));
      
      // Filters
      ['guns', 'turrets', 'hulls'].forEach(type => {
        document.getElementById(`${type}-nation`).addEventListener('change', () => filterComponents(type));
        document.getElementById(`${type}-era`).addEventListener('change', () => filterComponents(type));
        document.getElementById(`${type}-rarity`).addEventListener('change', () => filterComponents(type));
      });
      
      // Modal
      modalClose.addEventListener('click', closeModal);
      detailModal.addEventListener('click', event => {
        if (event.target === detailModal) {
          closeModal();
        }
      });
      
      // Tabs
      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          const tabName = button.getAttribute('data-tab');
          switchTab(tabName);
        });
      });
    }
    
    // Switch between component sections
    function switchSection(sectionType) {
      currentComponentType = sectionType;
      
      // Update navigation buttons
      navButtons.forEach(button => {
        button.classList.remove('active');
        if (button.id === `nav-${sectionType}`) {
          button.classList.add('active');
        }
      });
      
      // Update visible section
      sections.forEach(section => {
        section.classList.remove('active');
        if (section.id === `${sectionType}-section`) {
          section.classList.add('active');
        }
      });
    }
    
    // Populate filter dropdowns
    function populateFilters(componentType) {
      const components = componentsData[componentType] || {};
      
      // Get unique values
      const nations = new Set();
      const eras = new Set();
      const rarities = new Set();
      
      Object.values(components).forEach(component => {
        // Handle the different data structures between guns and components
        const attrs = componentType === 'guns' 
          ? component.metadata?.attributes 
          : component.metadata?.attributes;
        
        if (!attrs) return;
        
        if (attrs.Nation) nations.add(attrs.Nation);
        if (attrs.Era) eras.add(attrs.Era);
        if (attrs.Rarity) rarities.add(attrs.Rarity);
      });
      
      // Populate nation dropdown
      const nationSelect = document.getElementById(`${componentType}-nation`);
      nationSelect.innerHTML = '<option value="">All Nations</option>';
      Array.from(nations).sort().forEach(nation => {
        const option = document.createElement('option');
        option.value = nation;
        option.textContent = nation;
        nationSelect.appendChild(option);
      });
      
      // Populate era dropdown
      const eraSelect = document.getElementById(`${componentType}-era`);
      eraSelect.innerHTML = '<option value="">All Eras</option>';
      Array.from(eras).sort().forEach(era => {
        const option = document.createElement('option');
        option.value = era;
        option.textContent = era;
        eraSelect.appendChild(option);
      });
      
      // Populate rarity dropdown
      const raritySelect = document.getElementById(`${componentType}-rarity`);
      raritySelect.innerHTML = '<option value="">All Rarities</option>';
      const rarityOrder = ['Common', 'Uncommon', 'Rare', 'Epic', 'Legendary', 'Mythical'];
      
      rarityOrder.forEach(rarity => {
        if (rarities.has(rarity)) {
          const option = document.createElement('option');
          option.value = rarity;
          option.textContent = rarity;
          raritySelect.appendChild(option);
        }
      });
    }
    
    // Render components
    function renderComponents(componentType) {
      const components = componentsData[componentType] || {};
      const grid = document.getElementById(`${componentType}-grid`);
      
      // Clear grid
      grid.innerHTML = '';
      
      if (Object.keys(components).length === 0) {
        grid.innerHTML = `<div class="loading-indicator">No ${componentType} found</div>`;
        return;
      }
      
      // Sort components by name
      const sortedComponents = Object.entries(components)
        .sort((a, b) => a[0].localeCompare(b[0]));
      
      // Create component cards
      sortedComponents.forEach(([name, data]) => {
        // Handle different data structures for guns vs components
        const attrs = data.metadata?.attributes || {};
        
        // Create card
        const card = document.createElement('div');
        card.className = 'component-card';
        card.dataset.name = name;
        card.dataset.id = data.id;
        
        // Card header
        const header = document.createElement('div');
        header.className = 'component-header';
        
        const title = document.createElement('h3');
        title.textContent = name;
        header.appendChild(title);
        
        // Card content
        const content = document.createElement('div');
        content.className = 'component-content';
        
        // Metadata
        const meta = document.createElement('div');
        meta.className = 'component-meta';
        
        // Nation
        if (attrs.Nation) {
          const nation = document.createElement('div');
          nation.className = 'component-meta-item';
          nation.innerHTML = `<span class="badge badge-nation">${attrs.Nation}</span>`;
          meta.appendChild(nation);
        }
        
        // Era
        if (attrs.Era) {
          const era = document.createElement('div');
          era.className = 'component-meta-item';
          era.innerHTML = `<span class="badge badge-era">${attrs.Era}</span>`;
          meta.appendChild(era);
        }
        
        // Rarity
        if (attrs.Rarity) {
          const rarity = document.createElement('div');
          rarity.className = 'component-meta-item';
          rarity.innerHTML = `<span class="badge badge-rarity-${attrs.Rarity.toLowerCase()}">${attrs.Rarity}</span>`;
          meta.appendChild(rarity);
        }
        
        content.appendChild(meta);
        
        // Description
        if (attrs.Desc) {
          const desc = document.createElement('div');
          desc.className = 'component-desc';
          desc.textContent = attrs.Desc;
          content.appendChild(desc);
        }
        
        // Details button
        const detailsBtn = document.createElement('button');
        detailsBtn.className = 'button';
        detailsBtn.textContent = 'View Details';
        detailsBtn.addEventListener('click', () => showComponentDetails(componentType, name));
        content.appendChild(detailsBtn);
        
        // Assemble card
        card.appendChild(header);
        card.appendChild(content);
        
        // Add to grid
        grid.appendChild(card);
      });
    }
    
    // Filter components based on search and filter criteria
    function filterComponents(componentType) {
      const components = componentsData[componentType] || {};
      const searchInput = document.getElementById(`${componentType}-search`).value.toLowerCase();
      const nationFilter = document.getElementById(`${componentType}-nation`).value;
      const eraFilter = document.getElementById(`${componentType}-era`).value;
      const rarityFilter = document.getElementById(`${componentType}-rarity`).value;
      
      const cards = document.querySelectorAll(`#${componentType}-grid .component-card`);
      
      // Apply filters
      cards.forEach(card => {
        const name = card.dataset.name;
        const component = components[name];
        
        // Handle different data structures for guns vs components
        const attrs = component.metadata?.attributes || {};
        
        // Check if component matches all filters
        const matchesSearch = name.toLowerCase().includes(searchInput);
        const matchesNation = !nationFilter || attrs.Nation === nationFilter;
        const matchesEra = !eraFilter || attrs.Era === eraFilter;
        const matchesRarity = !rarityFilter || attrs.Rarity === rarityFilter;
        
        // Show or hide card
        if (matchesSearch && matchesNation && matchesEra && matchesRarity) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }
    
    // Show component details in modal
    function showComponentDetails(componentType, componentName) {
      const component = componentsData[componentType][componentName];
      if (!component) return;
      
      // Standardize access to metadata based on component type
      const metadata = component.metadata || component;
      const attrs = metadata.attributes || {};
      const config = metadata.config || {};
      
      // Reset active tab
      switchTab('basic');
      
      // Set modal title
      document.getElementById('modal-title').textContent = componentName;
      
      // Basic info tab
      const basicInfo = document.getElementById('modal-basic-info');
      basicInfo.innerHTML = '';
      
      // Create basic info content
      const basicContent = document.createElement('div');
      
      // Component ID
      basicContent.innerHTML += `<p><strong>ID:</strong> ${component.id}</p>`;
      
      // Nation, Era, Rarity badges
      if (attrs.Nation || attrs.Era || attrs.Rarity) {
        const badges = document.createElement('div');
        badges.style.marginTop = '10px';
        
        if (attrs.Nation) {
          badges.innerHTML += `<span class="badge badge-nation">${attrs.Nation}</span> `;
        }
        
        if (attrs.Era) {
          badges.innerHTML += `<span class="badge badge-era">${attrs.Era}</span> `;
        }
        
        if (attrs.Rarity) {
          badges.innerHTML += `<span class="badge badge-rarity-${attrs.Rarity.toLowerCase()}">${attrs.Rarity}</span> `;
        }
        
        basicContent.appendChild(badges);
      }
      
      // Description
      if (attrs.Desc) {
        const desc = document.createElement('div');
        desc.style.marginTop = '15px';
        desc.style.padding = '10px';
        desc.style.backgroundColor = '#f4f7f9';
        desc.style.borderRadius = '4px';
        desc.style.fontStyle = 'italic';
        desc.textContent = attrs.Desc;
        basicContent.appendChild(desc);
      }
      
      // Armour
      if (attrs.Armour) {
        const armour = document.createElement('div');
        armour.style.marginTop = '15px';
        armour.innerHTML = `<strong>Armour:</strong> ${attrs.Armour}`;
        basicContent.appendChild(armour);
      }
      
      // Crew
      if (metadata.crew && metadata.crew.length > 0) {
        const crew = document.createElement('div');
        crew.style.marginTop = '15px';
        crew.innerHTML = `<strong>Crew:</strong> ${metadata.crew.join(', ')}`;
        basicContent.appendChild(crew);
      }
      
      basicInfo.appendChild(basicContent);
      
      // Attributes tab
      const attrsList = document.getElementById('modal-attributes');
      attrsList.innerHTML = '';
      
      // Add all attributes
      Object.entries(attrs).sort((a, b) => a[0].localeCompare(b[0])).forEach(([key, value]) => {
        if (key === 'CF') return; // Skip CFrame
        
        const li = document.createElement('li');
        const nameSpan = document.createElement('span');
        nameSpan.className = 'attribute-name';
        nameSpan.textContent = key;
        
        const valueSpan = document.createElement('span');
        valueSpan.className = 'attribute-value';
        
        // Format the value based on its type
        if (typeof value === 'object' && value.type && value.type.startsWith('Vector')) {
          valueSpan.textContent = `${value.type}(${value.values.join(', ')})`;
        } else if (typeof value === 'object') {
          valueSpan.textContent = JSON.stringify(value);
        } else {
          valueSpan.textContent = value;
        }
        
        li.appendChild(nameSpan);
        li.appendChild(valueSpan);
        attrsList.appendChild(li);
      });
      
      // Config tab
      const configList = document.getElementById('modal-config');
      configList.innerHTML = '';
      
      // Add all config properties except shells
      Object.entries(config)
        .filter(([key]) => key !== 'Shells')
        .sort((a, b) => a[0].localeCompare(b[0]))
        .forEach(([key, value]) => {
          const li = document.createElement('li');
          const nameSpan = document.createElement('span');
          nameSpan.className = 'attribute-name';
          nameSpan.textContent = key;
          
          const valueSpan = document.createElement('span');
          valueSpan.className = 'attribute-value';
          
          // Format the value based on its type
          if (typeof value === 'object' && value.type) {
            if (value.type === 'Vector3') {
              valueSpan.textContent = `Vector3(${value.values.join(', ')})`;
            } else if (value.type === 'Color3') {
              valueSpan.textContent = `Color3(${value.values.join(', ')})`;
            } else {
              valueSpan.textContent = JSON.stringify(value);
            }
          } else if (typeof value === 'boolean') {
            valueSpan.textContent = value ? 'true' : 'false';
          } else {
            valueSpan.textContent = value;
          }
          
          li.appendChild(nameSpan);
          li.appendChild(valueSpan);
          configList.appendChild(li);
        });
      
      // Shells tab
      const hasShells = config.Shells && Object.keys(config.Shells).length > 0;
      shellsTab.style.display = hasShells ? 'block' : 'none';
      
      if (hasShells) {
        const shellsContainer = document.getElementById('modal-shells');
        shellsContainer.innerHTML = '';
        
        // For each shell type
        Object.entries(config.Shells).forEach(([shellType, shellData]) => {
          const shellSection = document.createElement('div');
          shellSection.style.marginBottom = '20px';
          
          // Shell type header
          const shellHeader = document.createElement('h3');
          shellHeader.textContent = shellType;
          shellSection.appendChild(shellHeader);
          
          // Shell properties
          const shellProps = document.createElement('ul');
          shellProps.className = 'attribute-list';
          
          Object.entries(shellData).sort((a, b) => a[0].localeCompare(b[0])).forEach(([key, value]) => {
            const li = document.createElement('li');
            const nameSpan = document.createElement('span');
            nameSpan.className = 'attribute-name';
            nameSpan.textContent = key;
            
            const valueSpan = document.createElement('span');
            valueSpan.className = 'attribute-value';
            
            if (typeof value === 'boolean') {
              valueSpan.textContent = value ? 'true' : 'false';
            } else {
              valueSpan.textContent = value;
            }
            
            li.appendChild(nameSpan);
            li.appendChild(valueSpan);
            shellProps.appendChild(li);
          });
          
          shellSection.appendChild(shellProps);
          shellsContainer.appendChild(shellSection);
        });
      }
      
      // Show modal
      detailModal.classList.add('active');
    }
    
    // Close the detail modal
    function closeModal() {
      detailModal.classList.remove('active');
    }
    
    // Switch active tab
    function switchTab(tabName) {
      // Update tab buttons
      tabButtons.forEach(button => {
        button.classList.remove('active');
        if (button.getAttribute('data-tab') === tabName) {
          button.classList.add('active');
        }
      });
      
      // Update tab content
      tabContents.forEach(content => {
        content.classList.remove('active');
        if (content.id === `${tabName}-tab`) {
          content.classList.add('active');
        }
      });
    }
    
    // Show error message
    function showError(message) {
      errorContainer.innerHTML = '';
      
      const errorDiv = document.createElement('div');
      errorDiv.className = 'error-message';
      errorDiv.textContent = message;
      
      errorContainer.appendChild(errorDiv);
    }
  </script>
</body>
</html>